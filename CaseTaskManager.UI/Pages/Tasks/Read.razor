@page "/tasks/details/{Id:int}"

<h3>Task Details</h3>

@if (loading)
{
    <p><em>Loading...</em></p>
}
else if (item is null)
{
    <div class="alert alert-warning">Task not found.</div>
    <button class="btn btn-secondary" @onclick="Back">Back</button>
}
else
{
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title mb-3">@item.Title</h5>

            <p class="mb-2">
                <strong>Status:</strong>
                <span class="badge bg-secondary">
                    @(!string.IsNullOrWhiteSpace(item.StatusName) ? item.StatusName : $"#{item.StatusId}")
                </span>
            </p>

            <p class="mb-2">
                <strong>Type:</strong>
                @(!string.IsNullOrWhiteSpace(item.TaskTypeName) ? item.TaskTypeName : $"#{item.TaskTypeId}")
            </p>

            <p class="mb-2">
                <strong>Case:</strong>
                @(!string.IsNullOrWhiteSpace(item.CaseTitle) ? item.CaseTitle : $"Case #{item.CaseId}")
            </p>

            @if (!string.IsNullOrWhiteSpace(item.Description))
            {
                <p class="mb-2">
                    <strong>Description:</strong><br />
                    @item.Description
                </p>
            }

            <p class="mb-0">
                <strong>Due:</strong> @item.DueDate.ToString("yyyy-MM-dd")
                &nbsp;&nbsp; <strong>Created:</strong> @item.CreatedAt.ToString("yyyy-MM-dd HH:mm")
            </p>
        </div>
    </div>

    <button class="btn btn-secondary" @onclick="Back">Back</button>
}
